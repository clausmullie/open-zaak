{% extends "master.html" %}

{% block content %}
<div class="px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h1 class="display-4">Service configuratie</h1>
    <p class="lead">Open Zaak API dashboard</p>
</div>

<div class="container text-left">

    <div class="text-right">
        <a href="{% url 'config-nlx' %}" class="btn btn-sm btn-secondary">Wijzigen</a>
    </div>
    <!-- NLX config -->
    <section>
        <div class="text-center">
            <h3>NLX</h3>
        </div>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Parameter</th>
                    <th scope="col">Waarde</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>NLX directory</strong></td>
                    <td>{{ nlx.directory_url| urlize }}</td>
                </tr>
                <tr>
                    <td><strong>Outway address</strong></td>
                    <td>{{ nlx.outway| urlize }}</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Internal API config -->
    <section>
        <div class="text-center">
            <h3>Open Zaak services</h3>
        </div>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Service</th>
                    <th scope="col" class="text-center"
                        data-toggle="tooltip" title="Service geactiveerd en aangeboden door Open Zaak">
                        Geactiveerd
                    </th>
                    <th scope="col" class="text-center"
                        data-toggle="tooltip" title="Service wordt aangeboden over NLX">
                        NLX
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for service in internal_services %}
                <tr>
                    <td>{{ service.component|title }} API</td>
                    <td class="text-center text-{{ service.enabled|yesno:'success,danger,muted' }}">
                        <i class="fa fa-{{ service.enabled|yesno:'check,times,minus' }}"></i>
                    </td>
                    <td class="text-center text-{{ service.nlx|yesno:'success,danger,muted' }}">
                        <i class="fa fa-{{ service.nlx|yesno:'check,times,minus' }}"></i>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <!-- External API config -->
    <section>
        <div class="text-center">
            <h3>External services</h3>
        </div>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Api type</th>
                    <th scope="col">Url</th>
                    <th scope="col">NLX path</th>
                    <th scope="col">Authorization</th>
                </tr>
            </thead>
            <tbody>
                {% for service in external_services %}
                <tr>
                    <td>{{ service.label }}</td>
                    <td>{{ service.get_api_type_display }}</td>
                    <td>{{ service.api_root| urlize }}</td>
                    <td>{{ service.nlx| urlize }}</td>
                    <td>
                        [{{ service.get_auth_type_display }}]
                        {% if service.auth_type == 'api_key' %}
                        {{ service.header_key }}: {{ service.header_value }}
                        {% elif service.auth_type == 'zgw' %}
                        <br>Client ID: {{ service.client_id }}, Secret: {{ service.secret }}
                        {% endif %}

                    </td>
                </tr>
                {% endfor %}
            </tbody>

        </table>

    </section>


</div>



{% endblock %}
